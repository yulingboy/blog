在index.js中添加登录路由

```js
router.detele('/users/:id',user.detele); // 删除用户信息
```

在user.js中将函数进行导出

```js
exports.detele = async (req, res) => {}
```

判断权限

```js
// 判断登录用户是否为超级管理员，只有超级管理员才可以删除用户
        if(req.user.role != 2){
            return res.send({
                meta: { code: 1001, message: '权限不足' },
                data: null,
              });
        }
```

全部代码



```js
exports.delete = async (req,res) => {
    try{
        // 判断登录用户是否为超级管理员，只有超级管理员才可以删除用户
        if(req.user.role != 2){
            return res.send({
                meta: { code: 1001, message: '权限不足' },
                data: null,
              });
        }
        const user = await User.findOne({_id: req.params.id});
        if(!user){
            return res.send({
                meta: { code: 1001, message: '用户不存在' },
                data: null,
              });
        }
        await User.findOneAndDelete({_id: req.params.id}).then(()=>{
            return res.send({
                meta: { code: 1001, message: '删除成功' },
                data: null,
              });
        }).catch(err=>{
            return res.send({
                meta: { code: 1001, message: '用户不存在' },
                data: null,
              });
        })
    }catch(err){
        return res.send({
            meta: { code: 1001, message: err.message },
            data: null,
          });
    }
}
```

